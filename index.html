<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Admin Loading...</title>
    <!-- Minimal styling for the loading message -->
    <style>
        body { font-family: Arial, sans-serif; background-color: #0b0f30; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .loader { font-size: 1.5em; }
    </style>
</head>
<body>

    <div class="loader">Loading Admin Panel...</div>

    <!-- Firebase Scripts are required to check authentication -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
     <!-- Add this line -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-check-compat.js"></script>

<!-- REPLACE your existing script block with this one -->
<script>
    const firebaseConfig = {
        apiKey: "AIzaSyAn2vbkT9yjyWtJzNSHgRureco5gEjYd_Q",
        authDomain: "stream-zone-movies-a83c1.firebaseapp.com",
        projectId: "stream-zone-movies-a83c1",
        storageBucket: "stream-zone-movies-a83c1.appspot.com",
        messagingSenderId: "148342664213",
        appId: "1:148342664213:web:56df2549cc480df7cf721c"
    };
    
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth(app);

    // --- NEW: Initialize and Activate App Check ---
    try {
        const appCheck = firebase.appCheck(app);
        appCheck.activate(
            '6LfFvcUrAAAAAH6JzBwpbxJqzHTJ8qA_rzSe5OMP', // Your reCAPTCHA v3 Site KEY
            true // isTokenAutoRefreshEnabled
        );
    } catch(e) {
        console.error("App Check failed to initialize on index page", e);
    }
    // ---------------------------------------------

    // The Redirect Logic
    auth.onAuthStateChanged(user => {
        if (user) {
            window.location.replace('add_from_tmdb.html');
        } else {
            window.location.replace('login.html');
        }
    });
</script>

</body>
</html>